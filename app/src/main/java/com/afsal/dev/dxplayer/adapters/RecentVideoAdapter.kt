package com.afsal.dev.dxplayer.adaptersimport android.util.Logimport android.view.LayoutInflaterimport android.view.ViewGroupimport androidx.recyclerview.widget.AsyncListDifferimport androidx.recyclerview.widget.DiffUtilimport androidx.recyclerview.widget.RecyclerViewimport com.afsal.dev.dxplayer.databinding.RecentVideoItemBindingimport com.afsal.dev.dxplayer.models.VideoSections.PlayedVideoItemimport com.afsal.dev.dxplayer.models.VideoSections.VideoItemModelimport com.afsal.dev.dxplayer.utills.CoreUttilesclass RecentVideoAdapter(private val onItemClick:(videoId:Long)->Unit):RecyclerView.Adapter<RecentVideoAdapter.RecentVodItemHolder>() {    private val diffCallback=object :DiffUtil.ItemCallback<PlayedVideoItem>(){        override fun areItemsTheSame(oldItem: PlayedVideoItem, newItem: PlayedVideoItem): Boolean {            return oldItem.videoId==newItem.videoId        }        override fun areContentsTheSame(oldItem: PlayedVideoItem, newItem: PlayedVideoItem): Boolean {          return oldItem==newItem        }    }     val differ=AsyncListDiffer(this,diffCallback) inner   class RecentVodItemHolder(val binding: RecentVideoItemBinding):RecyclerView.ViewHolder(binding.root) {        fun bind(videoItem: PlayedVideoItem){            if (videoItem.videoUri !=null) {                CoreUttiles.loadImageIntoView(                    videoItem.videoUri,                    binding.recentVideoImage,                    null,                    CoreUttiles.IMAGE_FRAGMENT                )              val progress=  CoreUttiles.getProgressPercent(videoItem.lastPlayedPosition,videoItem.videoDuration)                binding.progressBar.progress=progress                Log.d("DDDD","progress $progress")            }            binding.root.setOnClickListener{                onItemClick(videoItem.videoId)            }        }    }    override fun onCreateViewHolder(        parent: ViewGroup,        viewType: Int    ): RecentVideoAdapter.RecentVodItemHolder {       return  RecentVodItemHolder(RecentVideoItemBinding.inflate(LayoutInflater.from(parent.context),parent,false))    }    override fun onBindViewHolder(holder: RecentVideoAdapter.RecentVodItemHolder, position: Int) {        val videoItem=differ.currentList[position]                holder.bind(videoItem)    }    override fun getItemCount()=differ.currentList.size}